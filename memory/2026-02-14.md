# 2026-02-14 - StarAtlasTV Tweet Pipeline - Xvfb Browser Solution

## Problem
Browser posting was failing with "browser_session_invalid" on headless SSH server.

## Solution Implemented

### get_browser_command() Function
Created in `/home/vbai/openclaw_unified/apps/bots/tweet-pipeline/src/post/post_browser.py`:
```python
def get_browser_command():
    """Returns browser command with xvfb-run for headless servers."""
    if os.environ.get('DISPLAY'):
        return "chromium --user-data-dir=/home/vbai/.openclaw/browser_profiles/x/Default --profile-directory=Default"
    return "xvfb-run -a chromium --user-data-dir=/home/vbai/.openclaw/browser_profiles/x/Default --profile-directory=Default"
```

### Persistent Profile
- Location: `/home/vbai/.openclaw/browser_profiles/x/Default`
- Xvfb available: `/usr/bin/xvfb-run`

## Test Results
- Chromium + xvfb-run successfully loads x.com
- Full HTML DOM fetched âœ“
- Session detection working (shows `isLoggedIn:false`)
- Browser works, needs login cookies to post

## Next Steps
1. Manual login: `xvfb-run -a chromium --user-data-dir=/home/vbai/.openclaw/browser_profiles/x/Default https://x.com`
2. Pipeline will auto-use cookies after login
